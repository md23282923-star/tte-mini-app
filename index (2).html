<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TTE - The Ultimate Tap Game</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #ff9800; --bg: #000; --card: #1c1f24; --text: #fff; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; }
        
        /* Header Box */
        .header { display: flex; justify-content: space-around; padding: 15px; background: #111; border-bottom: 2px solid #222; }
        .h-item label { display: block; font-size: 10px; color: #888; text-transform: uppercase; }
        .h-item span { color: var(--primary); font-weight: bold; font-size: 14px; }

        /* Navigation Pages */
        .page { display: none; height: 100vh; padding: 20px; box-sizing: border-box; overflow-y: auto; padding-bottom: 100px; }
        .active { display: block; }

        /* Exchange Page */
        .balance-sec { text-align: center; margin: 30px 0; }
        .balance-sec h1 { font-size: 45px; display: flex; align-items: center; justify-content: center; gap: 10px; margin: 0; }
        .coin-icon { width: 45px; height: 45px; background: linear-gradient(145deg, #f5a623, #ffcc00); border-radius: 50%; box-shadow: 0 0 15px var(--primary); }
        
        .tap-area { display: flex; justify-content: center; margin: 40px 0; }
        #char { width: 230px; height: 230px; background: url('https://cdn-icons-png.flaticon.com/512/6840/6840478.png') no-repeat center; background-size: contain; cursor: pointer; transition: 0.1s; }
        #char:active { transform: scale(0.92); }

        /* Progress Bar */
        .energy-box { padding: 0 20px; }
        .bar-bg { width: 100%; height: 10px; background: #222; border-radius: 10px; margin-top: 10px; }
        #bar-fill { width: 100%; height: 100%; background: var(--primary); border-radius: 10px; transition: 0.3s; }

        /* Mine/Card System */
        .card-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px; }
        .card { background: var(--card); border: 1px solid #333; padding: 15px; border-radius: 15px; text-align: left; }
        .card h3 { font-size: 14px; margin: 0; color: var(--primary); }
        .card p { font-size: 11px; color: #aaa; margin: 5px 0; }
        .card .cost { font-weight: bold; font-size: 13px; display: block; margin-bottom: 10px; }
        .btn-buy { width: 100%; background: #28a745; border: none; color: white; padding: 8px; border-radius: 8px; font-weight: bold; }
        .btn-buy:disabled { background: #444; }

        /* Task/Earn Section */
        .task-item { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .task-info h4 { margin: 0; font-size: 14px; }
        .task-btn { background: var(--primary); border: none; padding: 5px 15px; border-radius: 5px; font-weight: bold; }

        /* Footer Nav */
        .footer { position: fixed; bottom: 0; width: 100%; height: 75px; background: #111; display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #222; }
        .f-item { color: #666; font-size: 11px; text-align: center; cursor: pointer; text-decoration: none; }
        .f-item i { display: block; font-size: 22px; margin-bottom: 4px; }
        .f-item.active-nav { color: var(--primary); }

        /* Tap Anim */
        .t-anim { position: absolute; color: white; font-weight: bold; font-size: 30px; animation: up 0.7s forwards; pointer-events: none; }
        @keyframes up { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-120px); opacity: 0; } }
    </style>
</head>
<body>

    <div class="header">
        <div class="h-item"><label>Tap Power</label><span id="tap-p">+1</span></div>
        <div class="h-item"><label>PPH</label><span id="pph-val">0</span></div>
        <div class="h-item"><label>Level</label><span>1/10</span></div>
    </div>

    <div id="p-ex" class="page active">
        <div class="balance-sec">
            <h1><div class="coin-icon"></div> <span id="bal">0</span></h1>
        </div>
        <div class="tap-area">
            <div id="char"></div>
        </div>
        <div class="energy-box">
            <div style="display: flex; justify-content: space-between; font-size: 14px;">
                <span>âš¡ <span id="eng">1000</span>/1000</span>
                <span>Bronze</span>
            </div>
            <div class="bar-bg"><div id="bar-fill"></div></div>
        </div>
    </div>

    <div id="p-mine" class="page">
        <h2 style="color:var(--primary)">Market Upgrades</h2>
        <div class="card-grid">
            <div class="card">
                <h3>Hamster Bot</h3>
                <p>+100 Profit/hr</p>
                <span class="cost">Cost: 500</span>
                <button class="btn-buy" onclick="buyCard(500, 100)">Upgrade</button>
            </div>
            <div class="card">
                <h3>Mining Farm</h3>
                <p>+500 Profit/hr</p>
                <span class="cost">Cost: 2000</span>
                <button class="btn-buy" onclick="buyCard(2000, 500)">Upgrade</button>
            </div>
        </div>
    </div>

    <div id="p-earn" class="page">
        <h2 style="color:var(--primary)">Tasks</h2>
        <div class="task-item">
            <div class="task-info"><h4>Join Channel</h4><p>+5000 TTX</p></div>
            <button class="task-btn" onclick="completeTask(5000)">Go</button>
        </div>
        <div class="task-item">
            <div class="task-info"><h4>Watch Video</h4><p>+2000 TTX</p></div>
            <button class="task-btn" onclick="completeTask(2000)">Watch</button>
        </div>
    </div>

    <div class="footer">
        <div class="f-item active-nav" onclick="nav('p-ex', this)"><i class="fas fa-home"></i>Exchange</div>
        <div class="f-item" onclick="nav('p-mine', this)"><i class="fas fa-hammer"></i>Mine</div>
        <div class="f-item" onclick="nav('p-earn', this)"><i class="fas fa-coins"></i>Earn</div>
        <div class="f-item" onclick="alert('Launch in 2026')"><i class="fas fa-air-freshener"></i>Airdrop</div>
    </div>

    <script>
        let bal = 0, pph = 0, eng = 1000, tapV = 1;
        const tg = window.Telegram.WebApp; tg.expand();

        function nav(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.f-item').forEach(i => i.classList.remove('active-nav'));
            el.classList.add('active-nav');
        }

        document.getElementById('char').addEventListener('touchstart', (e) => {
            e.preventDefault();
            if(eng >= tapV) {
                bal += tapV; eng -= tapV;
                update(); anim(e.touches[0].pageX, e.touches[0].pageY);
            }
        });

        function buyCard(c, p) {
            if(bal >= c) { bal -= c; pph += p; update(); }
            else { alert("Not enough TTX!"); }
        }

        function completeTask(r) { bal += r; update(); alert("Reward Collected!"); }

        function anim(x, y) {
            const t = document.createElement('div'); t.className = 't-anim';
            t.innerText = `+${tapV}`; t.style.left = x+'px'; t.style.top = y+'px';
            document.body.appendChild(t); setTimeout(() => t.remove(), 700);
        }

        setInterval(() => { if(pph>0) { bal += (pph/3600); update(); } }, 1000);
        setInterval(() => { if(eng<1000) { eng = Math.min(1000, eng+2); update(); } }, 1000);

        function update() {
            document.getElementById('bal').innerText = Math.floor(bal).toLocaleString();
            document.getElementById('pph-val').innerText = Math.floor(pph).toLocaleString();
            document.getElementById('eng').innerText = eng;
            document.getElementById('bar-fill').style.width = (eng/1000*100)+'%';
        }
        update();
    </script>
</body>
</html>